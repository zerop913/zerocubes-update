<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Заполнение профиля</title>
    <link rel="icon" type="image/png" href="assets/3d-cube.ico">
    <link rel="stylesheet" href="
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,300;0,400;0,500;0,600;0,700;1,200&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/output.css" />
    <link rel="stylesheet" href="./css/vector.css">     
  </head>
  <body class="bg-heroGradient">
    <!-- Header -->
    <div
          class="container mx-auto px-[94px] lg:px-[47px] md:px-[23.5px] sm:px-[11.75px]"
        >
          <header
            class="mx-auto flex items-center justify-around pt-[44px] lg:px-5"
          >
            <!-- Logo -->

            <article
              class="flex items-center justify-start"
              onclick="location.href='./index.html'"
            >
              <img src="./assets/header/logo.svg" class="cursor-pointer"/>
              <p class="text-[28px] font-semibold leading-7 text-violet">
                ZeroCubes
              </p>
            </article>

            <!-- Menu Desktop -->

            <nav class="flex flex-grow justify-center md:justify-end sm:hidden">
              <ul class="flex items-center gap-[41px] lg:gap-8">
                <li>
                  <a
                    href="./index.html"
                    class="relative text-[16px] font-semibold leading-4 text-violet after:absolute after:left-0 after:-bottom-1 after:h-[1px] after:w-full after:scale-0 after:bg-white after:transition-transform hover:after:scale-100"
                    >Главная</a
                  >
                </li>
                <li>
                  <a
                    href="./instructions.html"
                    class="relative text-[16px] font-semibold leading-4 text-white after:absolute after:left-0 after:-bottom-1 after:h-[1px] after:w-full after:scale-0 after:bg-white after:transition-transform hover:after:scale-100"
                    >Инструкции</a
                  >
                </li>
                <li>
                  <a
                    href="./assembly-online.html"
                    class="relative text-[16px] font-semibold leading-4 text-white after:absolute after:left-0 after:-bottom-1 after:h-[1px] after:w-full after:scale-0 after:bg-white after:transition-transform hover:after:scale-100"
                    >Сборка</a
                  >
                </li>
                <li>
                  <a
                    href="./contacts.html"
                    class="relative text-[16px] font-semibold leading-4 text-white after:absolute after:left-0 after:-bottom-1 after:h-[1px] after:w-full after:scale-0 after:bg-white after:transition-transform hover:after:scale-100"
                    >Контакты</a
                  >
                </li>
                <?php
                  session_start();
                  if (isset($_SESSION['username'])) {
                    echo '<li class="hidden md:block"><a href="#" class="relative text-[16px] font-semibold leading-4 text-white after:absolute after:left-0 after:-bottom-1 after:h-[1px] after:w-full after:scale-0 after:bg-white after:transition-transform hover:after:scale-100">'.$_SESSION['username'].'</a></li>';
                  } else {
                    echo '<li class="hidden md:block"><a href="#" class="relative text-[16px] font-semibold leading-4 text-white after:absolute after:left-0 after:-bottom-1 after:h-[1px] after:w-full after:scale-0 after:bg-white after:transition-transform hover:after:scale-100">Вход</a></li>';
                  }
                ?>
              </ul>
            </nav>

            <!-- Menu Mobile -->
            <nav
              id="mobile-menu"
              class="fixed left-0 top-0 right-0 bottom-0 hidden items-center justify-center bg-heroGradient"
            >
              <ul class="flex flex-col items-center gap-10">
                <li>
                  <a href="./index.html" class="text-xl text-white">Главная</a>
                </li>
                <li>
                  <a href="./instructions.html" class="text-xl text-white"
                    >Инструкции</a
                  >
                </li>
                <li><a href="./assembly-online.html" class="text-xl text-white">Сборка</a></li>
                <li><a href="./contacts.html" class="text-xl text-white">Контакты</a></li>
                <?php
                  if (isset($_SESSION['username'])) {
                    echo '<li><a href="login.html" class="text-xl text-white">'.$_SESSION['username'].'</a></li>';
                  } else {
                    echo '<li><a href="login.html" class="text-xl text-white">Вход</a></li>';
                  }
                ?>
              </ul>
            </nav>

            <!-- Log in -->
            <article class="flex md:hidden">
            <?php if (isset($_SESSION['username'])) { ?>
              <a href="login.html" class="custom-button py-[14px] px-12 text-center text-[20px] font-semibold text-white transition-colors hover:bg-[#562cfc]"><?php echo $_SESSION['username'] ?></a>
            <?php } else { ?>
              <a href="login.html" class="custom-button py-[14px] px-12 text-center text-[20px] font-semibold text-white transition-colors hover:bg-[#562cfc]">Вход</a>
            <?php } ?>
            </article>

            <!-- Burger menu -->
            <button
              id="burger"
              class="group relative hidden h-5 w-[30px] sm:block sm:justify-end"
            >
              <span
                class="absolute top-0 left-0 h-[1px] w-full bg-white transition-transform group-[.active]:translate-y-2 group-[.active]:rotate-45"
              ></span>
              <span
                class="absolute top-1/2 left-0 h-[1px] w-full bg-white transition-opacity group-[.active]:opacity-0"
              ></span>
              <span
                class="absolute bottom-0 left-0 h-[1px] w-full bg-white transition-transform group-[.active]:-translate-y-[11px] group-[.active]:-rotate-45"
              ></span>
            </button>
          </header>
    </div>

    <div class="bg-vector"></div>

    <!-- Заголовок -->
    <section class="container mx-auto px-[94px] lg:px-[47px] md:px-[23.5px] sm:px-[11.75px]">
        <div class="ml-[135px] mt-[230px] lg:ml-28 lg:mt-44 md:ml-20 md:mt-36 sm:mt-24 xs:ml-9">
          <h1 class="w-max text-[64px] font-semibold leading-[75px] text-white lg:text-5xl sm:text-3xl xs:text-2xl">
            Профиль
          </h1>
        </div>
      </section>

    <!-- Заполнение данных -->
    <section>
      <div class="container mt-16 mx-auto px-[94px] lg:px-[47px] md:px-[23.5px] sm:px-[11.75px]">
        <form action="./db/form_handler.php" method="post">
          <div>
                  <div class="flex">
                      <!-- Имя -->
                      <div>
                        <p class="text-2xl leading-normal text-[#706C83] md:text-xl sm:text-base">
                          Имя
                        </p>
                        <input type="text" name="name" class="custom-rect mt-[11px] h-[48px] w-[371px] px-4 text-white md:h-10 sm:w-64 "></input>
                      </div>
                      <!-- Фамилия -->
                      <div class="ml-6">
                        <p class="text-2xl leading-normal text-[#706C83] md:text-xl sm:text-base">
                          Фамилия
                        </p>
                        <input type="text" name="surname" class="custom-rect mt-[11px] h-[48px] w-[371px] px-4 text-white md:h-10 sm:w-64 "></input>
                      </div>
                    </div>
                    <div class="pt-6">
                        <p class="text-2xl leading-normal text-[#706C83] md:text-xl sm:text-base">О себе</p>
                        <textarea name="about" class="custom-rect mt-[11px] w-[766px] resize-y h-full px-4 text-white pt-2" maxlength="1000"></textarea>
                    </div>
                    <div class="pt-6 ">
                        <p class="text-2xl leading-normal text-[#706C83] md:text-xl sm:text-base">
                        Email</p>
                        <input type="email" name="email" class="custom-rect mt-[11px] h-[48px] w-[766px] px-4 text-white md:h-10 sm:w-64 "></input>
                    </div>
                    <div class="pt-6 flex">
                        <!-- 3x3 -->
                        <div>
                          <p class="text-2xl leading-normal text-[#706C83] md:text-xl sm:text-base">
                            Лучшее время 3x3*
                          </p>
                          <input type="time" name="time3" class="custom-rect mt-[11px] h-[48px] w-[371px] px-4 text-white md:h-10 sm:w-64 " step="0.001" min="00:00:00.00" max="00:59:59.99">
                        </div>
                        <!-- 2x2 -->
                        <div class="ml-6">
                          <p class="text-2xl leading-normal text-[#706C83] md:text-xl sm:text-base">
                            Лучшее время 2х2*
                          </p>
                          <input type="time" name="time2" class="custom-rect mt-[11px] h-[48px] w-[371px] px-4 text-white md:h-10 sm:w-64 " step="0.001" min="00:00:00.00" max="00:59:59.99">
                        </div>
                      </div>
                      <div class="mt-4">
                        <p class="text-base leading-normal text-[#706C83] md:text-xs sm:text-[8px]">
                          *Если вы не собирали головоломки на скорость, поставьте везде нули
                        </p>
                      </div>
              </div>

              <!-- Вывод сообщений -->
              <div id="message"></div>
            
              <div class="pt-10 flex">
                  <button
                  id="saveButton"
                    class="custom-button py-[8px] px-[67px] text-center text-[15px] font-semibold text-white transition-colors hover:bg-[#562cfc] mb-[85px]"
                  >
                    Сохранить
                  </button>
                  <button
                    class="ml-6 custom-button py-[8px] px-[67px] text-center text-[15px] font-semibold text-white transition-colors hover:bg-[#562cfc] mb-[85px]"
                  >
                    Забыли пароль
                  </button>
                </div>
              </form>
          </div>
      </section>
    <!-- Footer -->

    <footer class="mt-16 bg-footerGradient pt-[50px] pb-[50px]">
        <div class="mx-auto max-w-[1072px] px-5">
          <div class="flex justify-between md:flex-wrap md:gap-10">
            <div class="max-w-[270px]">
              <img
                src="./assets/footer/logo.svg"
                onclick="location.href='./index.html'"
                alt="img"
              />
              <p class="mt-[31px] text-xl text-grey sm:text-base">
                Научись собирать самую популярную головоломку в мире менее чем за
                минуту!
              </p>
            </div>
  
            <div class="grid max-w-[670px] grid-cols-3 gap-[105px] sm:gap-[50px]">
              <div>
                <p class="text-xl font-semibold text-violet sm:text-base">
                  Главная
                </p>
                <ul class="mt-4 flex flex-col gap-2">
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >Домашняя</a
                    >
                  </li>
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >Устройство</a
                    >
                  </li>
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >Язык вращений</a
                    >
                  </li>
                </ul>
              </div>
              <div>
                <p
                  class="text-xl font-semibold text-white sm:text-base"
                  onclick="location.href='./instructions.html'"
                >
                  Инструкции
                </p>
                <ul class="mt-4 flex flex-col gap-2">
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >3х3</a
                    >
                  </li>
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >2х2</a
                    >
                  </li>
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >Piraminx</a
                    >
                  </li>
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >Megaminx</a
                    >
                  </li>
                </ul>
              </div>
              <div>
                <p class="text-xl font-semibold text-white sm:text-base">
                  Сборка
                </p>
                <ul class="mt-4 flex flex-col gap-2">
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >Сборка онлайн</a
                    >
                  </li>
                  <li>
                    <a
                      href=""
                      class="text-xl text-[#706C83] transition-colors hover:text-white sm:text-base"
                      >Результаты</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </footer>
  
      <script src="./js/main.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function() {
      $('form').submit(function(e) {
        e.preventDefault(); // Предотвращаем обычное поведение отправки формы

        var form = $(this);
        var url = form.attr('action');
        var formData = form.serialize(); // Сериализуем данные формы

        $.ajax({
          type: 'POST',
          url: url,
          data: formData,
          dataType: 'json',
          success: function(response) {
            if (response.success) {
              // Выводим сообщение об успешном сохранении
              alert(response.message);
              window.location.href = 'index.html'; // Переадресация на index.html
            } else {
              // Выводим сообщение об ошибке
              alert(response.message);
            }
          },
          error: function() {
            // Выводим сообщение об ошибке
            alert('Ошибка при отправке формы.');
          }
        });
      });
    });
    </script>
      
    </body>
</html>